<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html"
      xmlns:th="http:/www.w3.org/1999/xhtml">


<div th:replace="fragments/header :: head1"></div>
<body>
<div class="container">
    <div th:replace="fragments/navbar :: navbar"></div>

    <div th:replace="fragments/menu :: menu"></div>

    <h3>New bill</h3>


    <form action="#" method="post" th:action="@{'/bills/new/'}" th:object="${billForm}">
        <table>
            <tr>
                <td>Employee:</td>
                <td><input required="required" th:field="*{employeeLogin}" th:text="${billForm.employeeLogin}"
                           type="hidden"/></td>
            </tr>
            <tr>
                <td>Registration:</td>
                <td><input required="required" th:field="*{carRegistration}" th:text="${billForm.carRegistration}"
                           type="hidden"/></td>
            </tr>
            <tr>
                <td>Client:</td>
                <td><input required="required" th:field="*{clientId}"
                           th:text="${client.firstName}+' '+${client.lastName}" type="hidden"/>
                </td>
            </tr>
            <tr>
                <td>Date: (yyyy/MM/dd HH:mm)</td>
                <td>
                    <input id="datepicker" th:field="*{dateReparation}" width="312"/>
                    <!-- <input type="text" id="dateReparation" name="dateReparation" th:value="*{dateReparation}" />-->

                </td>
            </tr>
            <tr>
                <td>Discount:</td>
                <td><input min="0.00" required="required" step=".1" th:field="*{discount}" type="number" value="0.00"/>
                </td>
                <td th:errors="*{discount}" th:if="${#fields.hasErrors('discount')}">Discount Error</td>
            </tr>
            <tr>
                <td>Vat:</td>
                <td><input th:field="*{vat}" th:text="${billForm.vat}" type="hidden"/>
                </td>
            </tr>
            <tr>
                <td><input th:field="*{status}" type="hidden"/></td>
            </tr>
            <tr>
                <td>Comments:</td>
                <td><textarea  th:field="*{Comments}" type="text"/></td>
                <td th:errors="*{Comments}" th:if="${#fields.hasErrors('Comments')}">Comments
                    Error
                </td>
            </tr>
            <tr>
                <table>
                    <tr>
                        <th>Tasks</th>
                    </tr>

                    <tr th:each="task, stat : ${taskList}">
                        <td>
                            <select th:name="|tasks.list[${stat.index}]|" th:value="${task}">
                                <option value="">new Task</option>
                                <option th:each="task : ${taskList}"
                                        th:utext="${task.getName()}"
                                        th:value="${task.getId()}"/>
                            </select>
                        </td>
                    </tr>
                </table>
            </tr>


            <tr>
                <td>
                    <button type="submit">Submit</button>
                </td>
            </tr>
        </table>
    </form>


</div>
<script th:inline="javascript">
    /*<![CDATA[*/
    var date = new Date();
    var today = new Date(date.getFullYear(), date.getMonth(), date.getDate());
    var disabled = [[${disabled}]];

    $('#datepicker').datepicker({
        format: "yyyy/mm/dd hh:mm",
        minDate: today,
        disableDates: disabled
    });
    /*]]>*/
</script>
</body>
</html>




